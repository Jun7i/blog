---
title: Covid Data Analysis project
date: 2021-04-16
tags:
 - Covid
categories: 
 - Data Analysis
---


<!-- more -->

## ISTA131 Final project
https://covid.cdc.gov/covid-data-tracker/#trends_dailydeaths
Columns: State, Date, New Deaths, 7-Day Moving Avg, Current Hospitalized COVID-19 Patients

#### Import modules
```python
import pandas as pd, numpy as np, matplotlib.pyplot as plt
import matplotlib.dates as mdates
import datetime
import datetime as dt
```

#### Get dataframe from csv file 
```python
def get_df():
    fname = input("file:")
    df = pd.read_csv(fname,sep=',', skiprows = 2, engine='python')
    del df["State"]
    df["Dates"] = np.nan
    def date_convert(date_to_convert):
        return datetime.datetime.strptime(date_to_convert, '%b %d %Y').strftime('%m/%d/%Y')
    df['Dates'] = df['Date'].apply(date_convert)
    del df["Date"]
    return df
```


#### Get date list 
```python
def get_date_lst():
    df = get_df()
    lst_dates = []
    for i in df['Dates']:
        lst_dates.append(i)
    return lst_dates
```

#### Get the graph of Current Hospitalized COVID-19 Patients
```python
def fig1():
    df = get_df()
    lst_dates = get_date_lst()
    x = [dt.datetime.strptime(d,'%m/%d/%Y').date() for d in lst_dates]
    plt.gca().xaxis.set_major_formatter(mdates.DateFormatter('%m/%d/%Y'))
    plt.gca().xaxis.set_major_locator(mdates.DayLocator(interval=50))
    plt.plot(x,df['Current Hospitalized COVID-19 Patients'])
    plt.gcf().autofmt_xdate()
    plt.xlabel("Dates")
    plt.ylabel("Current Hospitalized COVID-19 Patients")
```

#### Get the graph of New Deaths
```python
def fig2():
    df = get_df()
    lst_dates = get_date_lst()
    plt.figure(figsize=(10,10))
    plt.style.use('ggplot')
    lst_dates = []
    for i in df['Dates']:
        lst_dates.append(i)
    x = [dt.datetime.strptime(d,'%m/%d/%Y').date() for d in lst_dates]
    lst = []
    for i in df['New Deaths']:
        lst.append(i)
    x_pos = [i for i, _ in enumerate(x)]
    plt.bar(x,lst,width=0.8, color='darkviolet')
    plt.xlabel("Dates")
    plt.ylabel("New Deaths")
```

#### Get the graph of New Deaths
```python
def fig3():
    df = get_df()
    plt.figure(figsize=(16,10), dpi= 80)
    lst_dates = get_date_lst()
    lst = []
    for i in df["7-Day Moving Avg"]:
        lst.append(i)
    x = np.array(lst_dates)
    y = np.array(lst)
    plt.scatter(x, y)
    plt.gca().xaxis.set_major_locator(mdates.DayLocator(interval=50))
    plt.xlabel("Dates")
    plt.ylabel("7-Day Moving Avg")
```

#### Main functions
```python
def main():
    fig1()
    fig2()
    fig3()
    plt.show()
main()
```

[md-enhance]: https://vuepress-theme-hope.github.io/v2/md-enhance/zh/
